<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Weavr Docs - Web Interface</title>
    <meta name="description" content="Visual workflow management and API reference for Weavr." />
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-grid"></div>
    <div class="bg-glow"></div>

    <header class="site-header">
      <div class="container header-inner">
        <a class="brand" href="index.html">
          <img src="assets/openweavr-logo-text.png" alt="Weavr" />
        </a>
        <button class="nav-toggle" data-nav-toggle>Menu</button>
        <nav class="site-nav" data-site-nav>
          <a href="overview.html">Overview</a>
          <a href="getting-started.html">Getting Started</a>
          <a href="cli.html">CLI</a>
          <a href="web-app.html" aria-current="page">Web App</a>
          <a href="workflows.html">Workflows</a>
          <a href="integrations.html">Integrations</a>
          <a href="agents.html">AI Agents</a>
          <a href="troubleshooting.html">Troubleshooting</a>
        </nav>
      </div>
    </header>

    <main class="container page">
      <aside class="sidebar">
        <h3>Web Interface</h3>
        <a class="active" href="#starting">Starting the Server</a>
        <a href="#dashboard">Dashboard</a>
        <a href="#workflows">Workflows</a>
        <a href="#runs">Run History</a>
        <a href="#chat">Chat Interface</a>
        <a href="#api">REST API</a>
      </aside>

      <section class="content">
        <div class="section" id="starting">
          <h2>Starting the Server</h2>
          <p>Launch the Weavr server to access the web interface and API.</p>

          <div class="card">
            <pre><code>node weavr.mjs serve</code></pre>
          </div>

          <p>
            Open <a href="http://localhost:3847" target="_blank">http://localhost:3847</a> in your browser.
          </p>

          <div class="callout">
            <strong>Build first:</strong> Make sure you've run <span class="inline-code">npm run build:web</span>
            before starting the server.
          </div>
        </div>

        <div class="section" id="dashboard">
          <h2>Dashboard</h2>
          <p>The dashboard provides a comprehensive overview of your Weavr instance:</p>

          <img src="assets/dashboard-screenshot.png" alt="Weavr Dashboard" class="screenshot" style="width: 100%; border-radius: 8px; margin: 20px 0; box-shadow: 0 4px 12px rgba(0,0,0,0.3);" />

          <h3>Key Features</h3>
          <ul>
            <li><strong>AI Model</strong> - Shows your configured AI provider, model, and authentication status</li>
            <li><strong>Token Usage</strong> - Tracks input/output tokens and API requests across all AI operations</li>
            <li><strong>Workflows</strong> - Displays active, paused, and total workflow counts with success rate</li>
            <li><strong>Active Workflows</strong> - Lists deployed workflows with status, triggers, and quick actions (Run Now, Pause, Resume)</li>
            <li><strong>Recent Runs</strong> - Shows latest workflow executions with status and duration</li>
            <li><strong>Quick Actions</strong> - One-click access to create workflows, view all workflows, or access settings</li>
          </ul>

          <div class="callout">
            <strong>Real-time updates:</strong> The dashboard automatically refreshes when workflows run, showing live status via WebSocket connection.
          </div>
        </div>

        <div class="section" id="workflows">
          <h2>Workflows</h2>
          <p>The Workflows page lets you manage your workflow definitions:</p>

          <h3>Viewing Workflows</h3>
          <p>Browse all workflows loaded from your workflows directory. Click a workflow to see its YAML definition and configuration.</p>

          <h3>Creating Workflows</h3>
          <p>Create new workflows directly in the web UI with the built-in YAML editor.</p>

          <h3>Running Workflows</h3>
          <p>Execute any workflow with optional input data. The UI shows real-time execution progress.</p>
        </div>

        <div class="section" id="runs">
          <h2>Run History</h2>
          <p>View the execution history of all workflows:</p>
          <ul>
            <li><strong>Status</strong> - Success, failed, or running</li>
            <li><strong>Duration</strong> - How long the run took</li>
            <li><strong>Step details</strong> - Individual step outputs and errors</li>
            <li><strong>Logs</strong> - Full execution logs for debugging</li>
          </ul>
        </div>

        <div class="section" id="chat">
          <h2>Chat Interface</h2>
          <p>
            Interact with an AI agent directly from the web UI. The chat interface
            supports multi-turn conversations and can execute workflows on your behalf.
          </p>

          <div class="callout">
            <strong>Requires AI provider:</strong> Configure an Anthropic or OpenAI API key to use the chat feature.
          </div>
        </div>

        <div class="section" id="api">
          <h2>REST API</h2>
          <p>The server exposes a REST API for programmatic access.</p>

          <h3>Endpoints</h3>
          <table class="table">
            <thead>
              <tr>
                <th>Method</th>
                <th>Endpoint</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="inline-code">GET</span></td>
                <td>/api/workflows</td>
                <td>List all workflows</td>
              </tr>
              <tr>
                <td><span class="inline-code">POST</span></td>
                <td>/api/workflows</td>
                <td>Create a workflow</td>
              </tr>
              <tr>
                <td><span class="inline-code">GET</span></td>
                <td>/api/workflows/:name</td>
                <td>Get workflow details</td>
              </tr>
              <tr>
                <td><span class="inline-code">POST</span></td>
                <td>/api/workflows/:name/run</td>
                <td>Execute a workflow</td>
              </tr>
              <tr>
                <td><span class="inline-code">GET</span></td>
                <td>/api/runs</td>
                <td>List all runs</td>
              </tr>
              <tr>
                <td><span class="inline-code">GET</span></td>
                <td>/api/runs/:id</td>
                <td>Get run details</td>
              </tr>
              <tr>
                <td><span class="inline-code">GET</span></td>
                <td>/api/config/status</td>
                <td>Check configuration status</td>
              </tr>
              <tr>
                <td><span class="inline-code">GET</span></td>
                <td>/api/stats</td>
                <td>Get dashboard stats (AI config, token usage, workflow counts)</td>
              </tr>
            </tbody>
          </table>

          <h3>Examples</h3>

          <h4>List Workflows</h4>
          <div class="card">
            <pre><code>curl http://localhost:3847/api/workflows</code></pre>
          </div>

          <h4>Run a Workflow</h4>
          <div class="card">
            <pre><code>curl -X POST http://localhost:3847/api/workflows/hello-world/run \
  -H "Content-Type: application/json" \
  -d '{}'</code></pre>
          </div>

          <h4>Run with Input Data</h4>
          <div class="card">
            <pre><code>curl -X POST http://localhost:3847/api/workflows/process-data/run \
  -H "Content-Type: application/json" \
  -d '{"input": {"file": "data.csv"}}'</code></pre>
          </div>

          <h4>Create a Workflow</h4>
          <div class="card">
            <pre><code>curl -X POST http://localhost:3847/api/workflows \
  -H "Content-Type: application/json" \
  -d '{
    "name": "my-workflow",
    "yaml": "name: my-workflow\nsteps:\n  - id: greet\n    action: log\n    with:\n      message: Hello!"
  }'</code></pre>
          </div>

          <h4>Check Run Status</h4>
          <div class="card">
            <pre><code>curl http://localhost:3847/api/runs/run_abc123</code></pre>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container">
        <a href="https://github.com/openweavr/Openweavr" target="_blank">GitHub</a>
        &nbsp;&middot;&nbsp;
        MIT License
      </div>
    </footer>

    <script src="script.js"></script>
  </body>
</html>
